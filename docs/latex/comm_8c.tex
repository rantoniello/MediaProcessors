\hypertarget{comm_8c}{}\section{comm.\+c File Reference}
\label{comm_8c}\index{comm.\+c@{comm.\+c}}
{\ttfamily \#include \char`\"{}comm.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$stdarg.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$ctype.\+h$>$}\\*
{\ttfamily \#include \char`\"{}log.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stat\+\_\+codes.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}check\+\_\+utils.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}llist.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}uri\+\_\+parser.\+h\char`\"{}}\\*
Include dependency graph for comm.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{comm_8c__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structcomm__module__ctx__s}{comm\+\_\+module\+\_\+ctx\+\_\+s}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{comm_8c_a914faae84f39085695352bd45c0fca62}{T\+A\+G\+\_\+\+IS}(T\+AG)~(strcmp(tag, T\+AG)== 0)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structcomm__module__ctx__s}{comm\+\_\+module\+\_\+ctx\+\_\+s} \hyperlink{comm_8c_abc3d2a47ed9132f55cd4eb04eea887ca}{comm\+\_\+module\+\_\+ctx\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static int {\bfseries register\+\_\+comm\+\_\+if} (const \hyperlink{comm_8h_a0d96b9368107e517ea8253837384faf5}{comm\+\_\+if\+\_\+t} $\ast$comm\+\_\+if, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx)\hypertarget{comm_8c_afe16ef1909e95cf2453c79586192059e}{}\label{comm_8c_afe16ef1909e95cf2453c79586192059e}

\item 
static int {\bfseries unregister\+\_\+comm\+\_\+if} (const char $\ast$scheme, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx)\hypertarget{comm_8c_aa07542f1ac62b837ba6826eb32e8aa86}{}\label{comm_8c_aa07542f1ac62b837ba6826eb32e8aa86}

\item 
static const \hyperlink{comm_8h_a0d96b9368107e517ea8253837384faf5}{comm\+\_\+if\+\_\+t} $\ast$ {\bfseries get\+\_\+comm\+\_\+if\+\_\+by\+\_\+scheme} (const char $\ast$scheme, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx)\hypertarget{comm_8c_a51f1531d55a566c3a257a090fdb8661b}{}\label{comm_8c_a51f1531d55a566c3a257a090fdb8661b}

\item 
static \hyperlink{comm_8h_a0d96b9368107e517ea8253837384faf5}{comm\+\_\+if\+\_\+t} $\ast$ {\bfseries comm\+\_\+if\+\_\+allocate} ()\hypertarget{comm_8c_ab7ed47b0d519325f019e749283f5a77b}{}\label{comm_8c_ab7ed47b0d519325f019e749283f5a77b}

\item 
static \hyperlink{comm_8h_a0d96b9368107e517ea8253837384faf5}{comm\+\_\+if\+\_\+t} $\ast$ {\bfseries comm\+\_\+if\+\_\+dup} (const \hyperlink{comm_8h_a0d96b9368107e517ea8253837384faf5}{comm\+\_\+if\+\_\+t} $\ast$comm\+\_\+if\+\_\+arg)\hypertarget{comm_8c_aff6d47fc99c839f92323326442418b26}{}\label{comm_8c_aff6d47fc99c839f92323326442418b26}

\item 
static void {\bfseries comm\+\_\+if\+\_\+release} (\hyperlink{comm_8h_a0d96b9368107e517ea8253837384faf5}{comm\+\_\+if\+\_\+t} $\ast$$\ast$ref\+\_\+comm\+\_\+if)\hypertarget{comm_8c_a927db50c5290cd490859963386f1db55}{}\label{comm_8c_a927db50c5290cd490859963386f1db55}

\item 
static int {\bfseries comm\+\_\+module\+\_\+url\+\_\+probe} (const char $\ast$url)\hypertarget{comm_8c_a7252feeae2a2320007aaab89f3f0f1a0}{}\label{comm_8c_a7252feeae2a2320007aaab89f3f0f1a0}

\item 
int \hyperlink{comm_8c_a80ab733009abbbe6feec774dff3485b3}{comm\+\_\+module\+\_\+open} (\hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx)
\item 
void \hyperlink{comm_8c_ae7235878eac99238a0c19ac7e0672413}{comm\+\_\+module\+\_\+close} ()
\item 
int \hyperlink{comm_8c_a21edd1aa9b38d7eadecb70b5f963f437}{comm\+\_\+module\+\_\+opt} (const char $\ast$tag,...)
\item 
\hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$ {\bfseries comm\+\_\+open} (const char $\ast$url, const char $\ast$local\+\_\+url, \hyperlink{comm_8h_a2604d892f8ab29dfc96bd68e2cc3086f}{comm\+\_\+mode\+\_\+t} comm\+\_\+mode, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx,...)\hypertarget{comm_8c_a1b4ee842a6dbaefc66a776808aa331ca}{}\label{comm_8c_a1b4ee842a6dbaefc66a776808aa331ca}

\item 
void {\bfseries comm\+\_\+close} (\hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$$\ast$ref\+\_\+comm\+\_\+ctx)\hypertarget{comm_8c_a9215f79ed7599d103cd2a8b9be4835d1}{}\label{comm_8c_a9215f79ed7599d103cd2a8b9be4835d1}

\item 
int {\bfseries comm\+\_\+send} (\hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$comm\+\_\+ctx, const void $\ast$buf, size\+\_\+t count, struct timeval $\ast$timeout)\hypertarget{comm_8c_a4d493ddf6a804a2e03be3a5cf8980af0}{}\label{comm_8c_a4d493ddf6a804a2e03be3a5cf8980af0}

\item 
int {\bfseries comm\+\_\+recv} (\hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$comm\+\_\+ctx, void $\ast$$\ast$ref\+\_\+buf, size\+\_\+t $\ast$ref\+\_\+count, char $\ast$$\ast$ref\+\_\+from, struct timeval $\ast$timeout)\hypertarget{comm_8c_afe57fe056dcf3c4f4966d0ee404c4985}{}\label{comm_8c_afe57fe056dcf3c4f4966d0ee404c4985}

\item 
int {\bfseries comm\+\_\+unblock} (\hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$comm\+\_\+ctx)\hypertarget{comm_8c_a0a472f3879b3e2ea6f9575775d4a7191}{}\label{comm_8c_a0a472f3879b3e2ea6f9575775d4a7191}

\item 
int {\bfseries comm\+\_\+open\+\_\+external} (pthread\+\_\+mutex\+\_\+t $\ast$comm\+\_\+ctx\+\_\+mutex\+\_\+external, const char $\ast$url, const char $\ast$local\+\_\+url, \hyperlink{comm_8h_a2604d892f8ab29dfc96bd68e2cc3086f}{comm\+\_\+mode\+\_\+t} comm\+\_\+mode, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx, \hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$$\ast$ref\+\_\+comm\+\_\+ctx,...)\hypertarget{comm_8c_a67e1b0e92ba8fff6319e179bd80364f7}{}\label{comm_8c_a67e1b0e92ba8fff6319e179bd80364f7}

\item 
void {\bfseries comm\+\_\+close\+\_\+external} (pthread\+\_\+mutex\+\_\+t $\ast$comm\+\_\+ctx\+\_\+mutex\+\_\+external, \hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$$\ast$ref\+\_\+comm\+\_\+ctx, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx)\hypertarget{comm_8c_a2309f8c1635f6b334f2b22982ae80627}{}\label{comm_8c_a2309f8c1635f6b334f2b22982ae80627}

\item 
int {\bfseries comm\+\_\+reset\+\_\+external} (pthread\+\_\+mutex\+\_\+t $\ast$comm\+\_\+ctx\+\_\+mutex\+\_\+external, const char $\ast$new\+\_\+url, const char $\ast$local\+\_\+url, \hyperlink{comm_8h_a2604d892f8ab29dfc96bd68e2cc3086f}{comm\+\_\+mode\+\_\+t} comm\+\_\+mode, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx, \hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$$\ast$ref\+\_\+comm\+\_\+ctx\+\_\+curr,...)\hypertarget{comm_8c_a09186e043867c111cc9acbc5307e3173}{}\label{comm_8c_a09186e043867c111cc9acbc5307e3173}

\item 
int {\bfseries comm\+\_\+recv\+\_\+external} (pthread\+\_\+mutex\+\_\+t $\ast$comm\+\_\+ctx\+\_\+mutex\+\_\+external, \hyperlink{comm_8h_aacc0873718a86d8ef4658bad2500d091}{comm\+\_\+ctx\+\_\+t} $\ast$$\ast$ref\+\_\+comm\+\_\+ctx, void $\ast$$\ast$ref\+\_\+buf, size\+\_\+t $\ast$ref\+\_\+count, char $\ast$$\ast$ref\+\_\+from, struct timeval $\ast$timeout, \hyperlink{structlog__ctx__s}{log\+\_\+ctx\+\_\+t} $\ast$log\+\_\+ctx)\hypertarget{comm_8c_a8e0f63e9aba94ec4dbd092bdbc35716c}{}\label{comm_8c_a8e0f63e9aba94ec4dbd092bdbc35716c}

\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{comm_8c_abc3d2a47ed9132f55cd4eb04eea887ca}{comm\+\_\+module\+\_\+ctx\+\_\+t} $\ast$ \hyperlink{comm_8c_a6652e587b89a4c651dc23cd378c1d626}{comm\+\_\+module\+\_\+ctx} = N\+U\+LL
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Rafael Antoniello 
\end{DoxyAuthor}


\subsection{Macro Definition Documentation}
\index{comm.\+c@{comm.\+c}!T\+A\+G\+\_\+\+IS@{T\+A\+G\+\_\+\+IS}}
\index{T\+A\+G\+\_\+\+IS@{T\+A\+G\+\_\+\+IS}!comm.\+c@{comm.\+c}}
\subsubsection[{\texorpdfstring{T\+A\+G\+\_\+\+IS}{TAG_IS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+A\+G\+\_\+\+IS(
\begin{DoxyParamCaption}
\item[{}]{T\+AG}
\end{DoxyParamCaption}
)~(strcmp(tag, T\+AG)== 0)}\hypertarget{comm_8c_a914faae84f39085695352bd45c0fca62}{}\label{comm_8c_a914faae84f39085695352bd45c0fca62}
Returns non-\/zero if \textquotesingle{}tag\textquotesingle{} string is equal to given T\+AG string. 

Definition at line 56 of file comm.\+c.



\subsection{Typedef Documentation}
\index{comm.\+c@{comm.\+c}!comm\+\_\+module\+\_\+ctx\+\_\+t@{comm\+\_\+module\+\_\+ctx\+\_\+t}}
\index{comm\+\_\+module\+\_\+ctx\+\_\+t@{comm\+\_\+module\+\_\+ctx\+\_\+t}!comm.\+c@{comm.\+c}}
\subsubsection[{\texorpdfstring{comm\+\_\+module\+\_\+ctx\+\_\+t}{comm_module_ctx_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf comm\+\_\+module\+\_\+ctx\+\_\+s}  {\bf comm\+\_\+module\+\_\+ctx\+\_\+t}}\hypertarget{comm_8c_abc3d2a47ed9132f55cd4eb04eea887ca}{}\label{comm_8c_abc3d2a47ed9132f55cd4eb04eea887ca}
Module\textquotesingle{}s context structure. This structure is statically defined in the program. 

\subsection{Function Documentation}
\index{comm.\+c@{comm.\+c}!comm\+\_\+module\+\_\+close@{comm\+\_\+module\+\_\+close}}
\index{comm\+\_\+module\+\_\+close@{comm\+\_\+module\+\_\+close}!comm.\+c@{comm.\+c}}
\subsubsection[{\texorpdfstring{comm\+\_\+module\+\_\+close()}{comm_module_close()}}]{\setlength{\rightskip}{0pt plus 5cm}void comm\+\_\+module\+\_\+close (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{comm_8c_ae7235878eac99238a0c19ac7e0672413}{}\label{comm_8c_ae7235878eac99238a0c19ac7e0672413}
Close communication module. This is a global function and should be called only once at the end of the life of the application. 

Definition at line 129 of file comm.\+c.

\index{comm.\+c@{comm.\+c}!comm\+\_\+module\+\_\+open@{comm\+\_\+module\+\_\+open}}
\index{comm\+\_\+module\+\_\+open@{comm\+\_\+module\+\_\+open}!comm.\+c@{comm.\+c}}
\subsubsection[{\texorpdfstring{comm\+\_\+module\+\_\+open(log\+\_\+ctx\+\_\+t $\ast$log\+\_\+ctx)}{comm_module_open(log_ctx_t *log_ctx)}}]{\setlength{\rightskip}{0pt plus 5cm}int comm\+\_\+module\+\_\+open (
\begin{DoxyParamCaption}
\item[{{\bf log\+\_\+ctx\+\_\+t} $\ast$}]{log\+\_\+ctx}
\end{DoxyParamCaption}
)}\hypertarget{comm_8c_a80ab733009abbbe6feec774dff3485b3}{}\label{comm_8c_a80ab733009abbbe6feec774dff3485b3}
Open communication module. This is a global function and should be called only once at the very beginning and during the life of the application. 
\begin{DoxyParams}{Parameters}
{\em log\+\_\+ctx} & Pointer to a externally defined L\+OG module context structure. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status code (S\+T\+A\+T\+\_\+\+S\+U\+C\+C\+E\+SS code in case of success, for other code values please refer to .\hyperlink{stat__codes_8h}{stat\+\_\+codes.\+h}). 
\end{DoxyReturn}


Definition at line 101 of file comm.\+c.

\index{comm.\+c@{comm.\+c}!comm\+\_\+module\+\_\+opt@{comm\+\_\+module\+\_\+opt}}
\index{comm\+\_\+module\+\_\+opt@{comm\+\_\+module\+\_\+opt}!comm.\+c@{comm.\+c}}
\subsubsection[{\texorpdfstring{comm\+\_\+module\+\_\+opt(const char $\ast$tag,...)}{comm_module_opt(const char *tag,...)}}]{\setlength{\rightskip}{0pt plus 5cm}int comm\+\_\+module\+\_\+opt (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{tag, }
\item[{}]{...}
\end{DoxyParamCaption}
)}\hypertarget{comm_8c_a21edd1aa9b38d7eadecb70b5f963f437}{}\label{comm_8c_a21edd1aa9b38d7eadecb70b5f963f437}
Communication module options. This function represents the A\+PI of the communication module. This function is thread-\/safe and can be called concurrently.


\begin{DoxyParams}{Parameters}
{\em tag} & Option tag, namely, option identifier string. The following options are available\+:
\begin{DoxyEnumerate}
\item \char`\"{}\+C\+O\+M\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+R\+O\+T\+O\char`\"{}
\item \char`\"{}\+C\+O\+M\+M\+\_\+\+U\+N\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+R\+O\+T\+O\char`\"{}
\end{DoxyEnumerate}\\
\hline
{\em ...} & Variable list of parameters according to selected option. Refer to {\bfseries Tags description} below to see the different additional parameters corresponding to each option tag. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status code (S\+T\+A\+T\+\_\+\+S\+U\+C\+C\+E\+SS code in case of success, for other code values please refer to .\hyperlink{stat__codes_8h}{stat\+\_\+codes.\+h}).
\end{DoxyReturn}
\paragraph*{Tags description (additional variable arguments per tag)}


\begin{DoxyItemize}
\item {\bfseries Tag \char`\"{}\+C\+O\+M\+M\+\_\+\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+R\+O\+T\+O\char`\"{}\+:}~\newline
 Register the interface of an specific communication protocol.~\newline
 Additional variable arguments for function \hyperlink{comm_8h_a21edd1aa9b38d7eadecb70b5f963f437}{comm\+\_\+module\+\_\+opt()} are\+:~\newline
 
\begin{DoxyParams}{Parameters}
{\em comm\+\_\+if} & Pointer to the protocol interface structure (static and unambiguous interface implementation of the type \textquotesingle{}comm\+\_\+if\+\_\+t\textquotesingle{}). Code example\+: 
\begin{DoxyCode}
1 ...
2 const comm\_if\_t comm\_if\_udp= \{
3     "udp",
4     comm\_udp\_open,
5     comm\_udp\_close,
6     comm\_udp\_send,
7     comm\_udp\_recv,
8     comm\_udp\_unblock
9 \};
10 ...
11 ret\_code= comm\_module\_opt("COMM\_REGISTER\_PROTO", &comm\_if\_udp);
\end{DoxyCode}
\\
\hline
\end{DoxyParams}

\item {\bfseries Tag \char`\"{}\+C\+O\+M\+M\+\_\+\+U\+N\+R\+E\+G\+I\+S\+T\+E\+R\+\_\+\+P\+R\+O\+T\+O\char`\"{}\+:}~\newline
 Unregister the interface of an specific communication protocol.~\newline
 Additional variable arguments for function \hyperlink{comm_8h_a21edd1aa9b38d7eadecb70b5f963f437}{comm\+\_\+module\+\_\+opt()} are\+:~\newline
 
\begin{DoxyParams}{Parameters}
{\em scheme} & Pointer to a character string with the unambiguous protocol scheme name (for example\+: \char`\"{}udp\char`\"{}, \char`\"{}file\char`\"{}, ...). Code example\+: 
\begin{DoxyCode}
1 ret\_code= comm\_module\_opt("COMM\_UNREGISTER\_PROTO", "udp");
\end{DoxyCode}
 \\
\hline
\end{DoxyParams}

\end{DoxyItemize}

Definition at line 150 of file comm.\+c.



\subsection{Variable Documentation}
\index{comm.\+c@{comm.\+c}!comm\+\_\+module\+\_\+ctx@{comm\+\_\+module\+\_\+ctx}}
\index{comm\+\_\+module\+\_\+ctx@{comm\+\_\+module\+\_\+ctx}!comm.\+c@{comm.\+c}}
\subsubsection[{\texorpdfstring{comm\+\_\+module\+\_\+ctx}{comm_module_ctx}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf comm\+\_\+module\+\_\+ctx\+\_\+t}$\ast$ comm\+\_\+module\+\_\+ctx = N\+U\+LL\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{comm_8c_a6652e587b89a4c651dc23cd378c1d626}{}\label{comm_8c_a6652e587b89a4c651dc23cd378c1d626}
Communication module static instance. 

Definition at line 99 of file comm.\+c.

